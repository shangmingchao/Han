os: linux
language: android
android:
  components:
    - tools
    - platform-tools
    - build-tools-28.0.3
    - android-29
    - addon-google_apis-google-29
    - extra-google-m2repository
    - extra-android-m2repository
before_install:
  - openssl aes-256-cbc -K $encrypted_5ad7d9eff25f_key -iv $encrypted_5ad7d9eff25f_iv
    -in han.keystore.enc -out han.keystore -d
  - chmod +x gradlew
script:
  - ./gradlew assembleRelease
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
    - $HOME/.android/build-cache
env:
  global:
    - secure: RiXfJo2ttpZom6z59qJc6WF31s93MddGuv02m5gpAwF19845gsGR1zHvnRV2ySvqN8ibhLkQBnlXntNCO0cGWs2BmdZYZ3t/pvPLU8vqwmNqjgabYr/PueMP3arrkdKnmSNL+hqtC4Ob2fGyzJUzdSEQZB0sOxlRn0dGiZXkacOLGyoyqqRqnrU2on1d0I68AgjTw8zmVUou8qE0v43KbQjRg8QNR+kGeSy3qOZPDX88LsA3/e/7XnyFNg9uTilJmTxwBsYQAMa2ZY9HZYgnMMGYaxa+Snghh1XMLpfHpjOUrsnexNeXBXYpL4P4wtBCn/9hHYHEG6zgV1sPpHpVrJBEXlyo+r2jfsb1tFhbYROLoEV5zNJnLnaqkZOVWZIhyBPHvodlCTbZznIzi0gj+LajijAtTU4AeG9XEXFTLiJAe3gYcSxIfvF8QFMXNb9Ol0EALlCd/0f18ozky2zjuyZRosPRRgGoJGTe5Phybb2sfoOZy80+PJg3M2YX3se4+cc7K/s8J+lnXQquf0XjkGQbl3UgCTG5lJxX4BwxCqNRvX5LtFpazIxH8JhnqGL9R9dTlmXeznLnVPIRwBaQAb9aJX21vAL3xtkIMmz+aiALOfDAKILANkkttCILzJuM+1Q7fAXW2IAROkVk0LxHuhRqqWM634+Y/0FwOZHgRwY=
    - secure: b+B7iFm72i+UL7H59iBEW2GoXNXSPi34uk+MYxQ6NHwUP9QwgfY8m+k0tOQCy3CD9W5M4j9Y4tAYsMBjT28QJ1p4AJTN9JJGivSZ9Ie+O/Ak/6hEXp9XxCHU1EtzrvFBhwVOgE/020lkBGiXpZolJDtvHfazCpsEQlCBdx1UHIgAH4Fo5FieJuYEHqpl7o0MG8N+ra4U+h3mq3OFV5CQtXuEv7P26li3uzGeSTqQZVgTDpb7P8pH8bISnUH5AST6QiJ47OujYVsoYs6GXzfH2XvULvihOw4dTIVmYo43wnWeRHJwsDspTjReQQjFRXyaV+3Dj6Z8gY125E8D0N7ynOgwdnXmZEXxuwetz8HR7Kc5iJRyYpqIvT6kIyGAutEWvssTPyAa0ZU9RwAeZb278ROrXs7iJFuANwrclsiLQnxCRYlUsyXVBhc3gjBMaiUOy3nHGBxmZBL+UFDWZ0zWLLnaAgyrRzaKXXPHmew15Uxg0PfsOpKVfRMZPOT8hkmDa7cNVY+p1IELRCp+/DZK/I0YtXY0667UpJXKeZfgzndtUqX17JvQ3xdJIP7VP1JyzYeVknjTMGVyXY+2dhWARMpAl/XRZXNdI1Xwnwt9i0k7UDjqCEsRKBCB2v5U5qgvVLVWyDKgtlQmQZ4CbFEhdHifM6jzao3ByhjEKhN+i8I=
deploy:
  provider: releases
  api_key:
    secure: jBSi2ry+eQmDK1pbgG9lfx1lzCLlPt0Jh99IK0MP7NBt6n0obALNrrlpF3MsU2F6FVJn7QBM0xmmLswXPVZHRcoSPx8fgCAnMCFSgsLRxlrjO8OzjkPQBQO6YeBIMsmYFH30s2xEVnlcpR43DjLaXfXm8VAZ9WokzcLDKVDXACk3pCM2KZ9qlnYSstGzKPxiCmBZI9FUEYnuRnQVk6h1Ts1uJPVQoCNez3SWz75v4HL70/MnrPBS+sC2USJvahFED2Q/NgTA3R3rLm8Qq17S3L8ATAzRVZwK5ZqLt7IQmZw9iBNOi4AyQdmCk/q7F3d1LLiY+vI6cTeN0cc0NiVyJloV69G4EAeAiCMvSfMMa8E9h+G3ut1paFwIW3VLCa6wI7q4ijwSaKifpE8ZiYaDqPBuzREsOR/8LI8ERKD3ZohdPXXhyCKV2Skoqj9IX9xT3/ZpbPFou5TLFPa26eVN9j52UDv/SU2Gb/XtoMzD6XsgFZbleEsD50Xzlkc7cBOKQ63xa4tDZeOHJIj3IiTnRcv429KHJwgFbPv5O6oSUsPBdCTzj3yRsBUf0R4zT1TP0w8OuOkvRmXBV3Ni6i8RGouNZjchzwXY1lL76s61DtwYD4pAy0ys3CB2VLy6FgLNr5XKRLo6bZdMui1n5ylWNp1XUaWTUs/Mx+MXmiJFbHw=
  file: app/build/outputs/apk/release/app-release.apk
  skip_cleanup: true
  on:
    repo: shangmingchao/Han
    tags: true
