os: linux
language: android
android:
  components:
    - tools
    - platform-tools
    - build-tools-28.0.3
    - android-29
    - addon-google_apis-google-29
    - extra-google-m2repository
    - extra-android-m2repository
before_install:
  - openssl aes-256-cbc -K $encrypted_5ad7d9eff25f_key -iv $encrypted_5ad7d9eff25f_iv -in han.keystore.enc -out han.keystore -d
  - chmod +x gradlew
script:
  - ./gradlew assembleRelease
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
    - $HOME/.android/build-cache
env:
  global:
    - secure: jA+AJTv9pYnt76eYkLZaNBR2WfBH6ZdK/qxf8WxwlJ3GQ72TYFToDZgKr+ADWQAWDu6v5PdSJ9C4ORseTYa30ZxTZ4nN14+qsPrj3mVRbazD/ngQUPPeEtND+aDbcH+hLZoakrgp/aj5XznwUDoyujwOummHzk9xEPwNTtewNzzfcNBK6ToE5DBcTP2d1HC1YI7dod3SFgOkoVVLC9Wz+Jmdd9cQ2xPSZhvsXAbOE2Ctyh1e1jpWVI5l0ddgGmNx7l+KbHWDxQAk+DC4XEXIJpYsbpeowyEgqWRo4R4K1KDUqaGRZ+q/ic9Wd2mqbcDvsdneo5ZfrP6ILETku0GGjd4A7DsKSltujl/sHCyaXyTlzvPBc0TecyhKtyg/JXDVlev5uc+OW+5P7l/OVLeRE6Du5SJgoraanwTMnTdW8QcsdZgF7NMk+GZfeeZVnhJ7IDsekQzrRfk7cvikWqhklWRZXgSm/eoedBmfKamp9hRrbxs5gZwH+PD4yq1IT7Mhdc8Um2OAtOmbgQLhHXA84XS4XgjmuCz8TAJkYyiUBRuMTJGY8o6Q5XTzoDg/bnAvdovBjc+Y12vE3guLwegk2URPjYE113C9zEUQp9J4HWSNOVVpz4KoY7MY9sadUH892drK77Knx6oX073QV6AT6r1hJ/5K8+YoYX8fYVw1w1A=
    - secure: ZVnidBJHL4Si/hWln3tg9SR4masaddxWkzWeZ+rt825BOy1DzKLxx2CZxT2cz5Traojp1E2YMnKvZPIXzy+e5k9YdRs2gmN53guCBS14r49T8vMU+GZ/ypdmDnCxXBW412dDOCwgOXxeVCVa+lNKSkMYppE6cMNLUxCCDogwgaezzsZFWHfi2V20LZhqidYiMMtlxgQmSJRIPEH9ncwpDXjgIP6avnOOIaXUUN0acPB93I0zjJGr63BhcVDg0clCn9asjgIHz6LPR9b+y+WWviw+8ck+YE1HngFkMpjEyeK6OB01uYd8fxXiZUuDo57p6c1USfz8LoQsdcEDeL48Gme2ovcQ411gbLqhWVwbRrj7r0S8XUCkNtI0OnZkeWIZxYXF22bL1RkeTsZVDCeKQuIkgaP+5LQyy8j82i1xUFIVvHa+oLX+3TZt6/m0LjhjjJm5uBoSOLDa7ofJ8Pr7tlOzkQbXYPDOitB84ip6w9THl/G2GxUY6NpgFEQ6jKsKPfZNj/YQg9+TndILt95ywXLqfh3UB6jy8kvwBdo/LhQQ9Ax5DOs28adFSKmsKpbNDo1OtoEhehwwH/HfowhzuRUsarBqMY/qD7r7lwNFXT834hpg+5qFjnHQwNjzNhBo4OScdLY/aCrz7jswvnNK9h3l3I/l+fQclKoFxEdcCx8=
deploy:
  provider: releases
  api_key:
    secure: n9nZknN6hw2Otn+g1LyOAQgCKEz5MpiHQdUe4VIjb0Rj9MfuwmcB5tAZZs+gDF47b+dY8sSdf0x5eXkCuQKmfrX2ha7NhEoitiMIvZ0Z41DYQtYeHdqotCtMFFSDBe9XtKIZWteNUVxr5d1fAovJ6D1rZNe3RrTN8WOhR2OLNg19fZsyXJCTwfp6QyfRNfuqn1xHwUjyIFsuhbIst14wg8u2oz910AhSHYo76XYCeGBdc5WdQWM0tTOgpqS38KJSys40+YDLtLHRZ77xiRkoRi7NePcKjmJ7MR9ySxGSnw8Vjz2YjTjMpQ6R2feR/ZXe6kbNmqLVof0DlqQ+TbpS1SgWdwRAi33PUQ5sW16MMkoxHiFetVNOA3S2cq4GTDfxs0uTpggp5XAuq455/zD5/Pd0sRQ3Vrl2pNk9rVb9SdpMN1Yva0uzQ1UsbTa/Jv/kq4f2D5u09iZy5FLjGdtxdAdMfebiVGAy640gW7MIej1dFGTeAz8Tx77F/4hzHD05wqKDKt1XASSoJAZmzyu+AdaA7T+FgSRU3AmMosAe5VL0ph0BR+A0EB4t8gQ/WQIz+5kDKPOUH3qPwewYLYvWDtNHLNc3q8oz6QuwhWPxeFw2D6cViOzaDdLl+mHColMaPKOSs6nz5KAPB3fzLnH1a2UDaZ2vgM/yRv9Xmifg2Sc=
  file: app/build/outputs/apk/release/app-release.apk
  skip_cleanup: true
  on:
    repo: shangmingchao/Han
    tags: true
