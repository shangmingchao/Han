os: linux
language: android
android:
  components:
    - tools
    - platform-tools
    - build-tools-28.0.3
    - android-29
    - addon-google_apis-google-29
    - extra-google-m2repository
    - extra-android-m2repository
before_install:
  - openssl aes-256-cbc -K $encrypted_5ad7d9eff25f_key -iv $encrypted_5ad7d9eff25f_iv
    -in han.keystore.enc -out han.keystore -d
  - chmod +x gradlew
script:
  - ./gradlew assembleRelease
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
    - $HOME/.android/build-cache
env:
  global:
    - secure: RiXfJo2ttpZom6z59qJc6WF31s93MddGuv02m5gpAwF19845gsGR1zHvnRV2ySvqN8ibhLkQBnlXntNCO0cGWs2BmdZYZ3t/pvPLU8vqwmNqjgabYr/PueMP3arrkdKnmSNL+hqtC4Ob2fGyzJUzdSEQZB0sOxlRn0dGiZXkacOLGyoyqqRqnrU2on1d0I68AgjTw8zmVUou8qE0v43KbQjRg8QNR+kGeSy3qOZPDX88LsA3/e/7XnyFNg9uTilJmTxwBsYQAMa2ZY9HZYgnMMGYaxa+Snghh1XMLpfHpjOUrsnexNeXBXYpL4P4wtBCn/9hHYHEG6zgV1sPpHpVrJBEXlyo+r2jfsb1tFhbYROLoEV5zNJnLnaqkZOVWZIhyBPHvodlCTbZznIzi0gj+LajijAtTU4AeG9XEXFTLiJAe3gYcSxIfvF8QFMXNb9Ol0EALlCd/0f18ozky2zjuyZRosPRRgGoJGTe5Phybb2sfoOZy80+PJg3M2YX3se4+cc7K/s8J+lnXQquf0XjkGQbl3UgCTG5lJxX4BwxCqNRvX5LtFpazIxH8JhnqGL9R9dTlmXeznLnVPIRwBaQAb9aJX21vAL3xtkIMmz+aiALOfDAKILANkkttCILzJuM+1Q7fAXW2IAROkVk0LxHuhRqqWM634+Y/0FwOZHgRwY=
    - secure: b+B7iFm72i+UL7H59iBEW2GoXNXSPi34uk+MYxQ6NHwUP9QwgfY8m+k0tOQCy3CD9W5M4j9Y4tAYsMBjT28QJ1p4AJTN9JJGivSZ9Ie+O/Ak/6hEXp9XxCHU1EtzrvFBhwVOgE/020lkBGiXpZolJDtvHfazCpsEQlCBdx1UHIgAH4Fo5FieJuYEHqpl7o0MG8N+ra4U+h3mq3OFV5CQtXuEv7P26li3uzGeSTqQZVgTDpb7P8pH8bISnUH5AST6QiJ47OujYVsoYs6GXzfH2XvULvihOw4dTIVmYo43wnWeRHJwsDspTjReQQjFRXyaV+3Dj6Z8gY125E8D0N7ynOgwdnXmZEXxuwetz8HR7Kc5iJRyYpqIvT6kIyGAutEWvssTPyAa0ZU9RwAeZb278ROrXs7iJFuANwrclsiLQnxCRYlUsyXVBhc3gjBMaiUOy3nHGBxmZBL+UFDWZ0zWLLnaAgyrRzaKXXPHmew15Uxg0PfsOpKVfRMZPOT8hkmDa7cNVY+p1IELRCp+/DZK/I0YtXY0667UpJXKeZfgzndtUqX17JvQ3xdJIP7VP1JyzYeVknjTMGVyXY+2dhWARMpAl/XRZXNdI1Xwnwt9i0k7UDjqCEsRKBCB2v5U5qgvVLVWyDKgtlQmQZ4CbFEhdHifM6jzao3ByhjEKhN+i8I=
deploy:
  provider: releases
  api_key:
    secure: VArgTlU4pVQL4VOddlX9g2dqyrrzdvf7wkdNApvmGr2lKzqhXytfxyxGc2yiicFL01bnDTY9NZ1ZrGGNHccegmd1MIG9TfymFnuTLJVFzu3mGOLjsaYq++TjXE1JYITF9XAYnoUMuxVF2H6uooEzABrdWyj4x96XXu8si37fzSslTc/ZuLvEiefyNQe0fDsZbIyx+9brYkLqNsGH+inDDDCPgjQCoa5K9/IIhxvrVqIVvZiCs0z5UzLkxNY/SyWU+nyNlQukk35Ecle7MmYtY4VNhyunq4JgEInai/taRhzHhUcHXZ4GseEw9ZauFg4HZ2gYEUTXItFKjS/72NFRc37AFPwpEn0ScECr6x5GfldC0FLD4NcMqQdyzX9p2TYNYE81LbHZErhrWyybthoJlIe80QFXxGyJVvT4KYHXxj7dFPWIhHMIjDYliECmS6TmPYZGhEdG3s41HsbbbLIT0mBG/Np/dxVjAqQlcV7x5N9J1/7U316Gz4k4+yoSvdRHxSlG4KFUPZlIBSf19JxpdzaftT7/ISeDMuqZnCUaJccHBc8YHAAI55KYlGFzvPMNOchmiosD0MXOoM4n6ms28y1sAPSr7pDazhe+6l1hlco3P8oh7jxzIFothoX0q/4JwagbJzr72+Er1la43l5u6oGy0yjtBeVbEM8ohSyvnn4=
  file: app/build/outputs/apk/release/app-release.apk
  skip_cleanup: true
  on:
    repo: shangmingchao/Han
    tags: true
